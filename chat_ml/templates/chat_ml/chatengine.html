
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chatbot</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
{#    <link rel="stylesheet" href="stylesheetchatengine.css">#}

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#query').keyup(function () {
                var q=$(this).val();
                if(q.slice(-1)==" "){
                    $.ajax({
                        type:'POST',
                        url:"{% url 'chatapp:getnword' %}",
                        data:{
                            query:q,
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()

                    },
                        success:function (data) {
                            console.log(data)

                        }
                    })
                }


            });
           $('#sub').click(function(e){
               e.preventDefault();
              q=$('#query').val();
              $('#query').val("");
                var $div=$("<div>",{id:"question",style:"color:black; background-color:#edeeef;font-size:15px;padding: 25px;margin: 25px;max-width:60%;clear:both;float:right;border-radius: 25px"});
                $div.text(q)
               $('#chatbox').append($div)
{#              "{% url 'chatapp:googleapi' %}"#}
{#               "{% url 'chatapp:tensorflow' %}"#}
{#               $(this).attr('href')#}
              $.ajax({
                type: 'POST',
                url: "{% url 'chatapp:tensorflow' %}",
                data: {
                    query:q,
                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                },
                success: function (data) {
                    console.log(data)
                    var $div=$("<div>",{id:"answer",style:"color:white; background-color:blue;padding: 25px;margin: 25px;max-width:60%;clear:both;float:left;border-radius: 25px"});
                $div.text(data)
               $('#chatbox').append($div)

                    window.scrollTo(0,document.body.scrollHeight);
                }

});
           });


        });
    </script>

</head>
<body >
<div id="chatbox" >

</div>
<div id="form" style="position:fixed;bottom:0px;width: 100%;height: 6%" >
<form action="" method="POST">
    {% csrf_token %}
    <input type="text" name="query" id="query" style="float: left;width: 80%;height: 100%" autocomplete="off">
    <button type="submit" style="float: right;width: 20%;height: 100%" href="{% url 'chatapp:home' %}" id="sub">Send</button>
</form>
</div>

</body>


</html>